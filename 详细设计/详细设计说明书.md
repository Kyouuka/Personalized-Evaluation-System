[toc]

# 1. 引言

## 1.1 编写目的

编写此报告旨在说明怎样具体地实现该程序系统，包括程序系统的结构，各个模块的程序描述、功能与性能描述、输入输出项、算法、流程逻辑、接口、存储分配、注释设计、限制条件、测试计划与尚未解决的问题等，对目标系统进行精确的描述。

本报告预期读者广泛，主要针对小组中的程序系统设计、开发人员和相关的测试人员。

## 1.2 背景

待开发软件系统为：针对学生的个性化评价系统。此项目为北京大学软件与微电子学院软件工程课程的课程项目，开发者为软件工程第八小组成员组成，主要用户为软件工程老师、助教和选修了软件工程课程的学生。

大规模管理的班级内，学生的知识基础、学习能力会明显分层。因此对不同的学生提出不同的建议和个性化评价，找到其最适应的学习路线，是提高效率的最佳方式。然而因材施教的教育方式对教师提出了极高的要求，不仅需大量关注学生的学习情况，还需针对每个学生制定个性化方案。个性化评价系统将代替老师完成这些大量冗杂的工作，自动分析学生的学习状态并作出个性化评价。此系统在还提供了根据学生日常表现预测学生期末成绩的功能，旨在督促和激励学生的阶段性学习。

## 1.3 定义

SRS: Software Requirement Specification(软件需求说明)

DFD: Data Flow Diagram(数据流图)

DD: Data Dictionary(数据字典)

WSGI: Web Server Gateway Interface(Web服务器网关接口)

wsgiref: python内置的一个WSGI服务器的参考实现模块

ORM: Object Relational Mapping(对象关系映射)，用于实现面向对象编程语言里不同类型系统的数据之间的转换。

MySQL: 一个RDBMS(Relational Database Management System)关系型数据库管理系统。

MTV: Model（模型：负责业务对象和数据库的ORM）,Template（负责如何把页面展示给用户html）,View（负责业务逻辑，并在适当时候调用Model和Template）。

## 1.4 参考资料

[1]蔡剑桥.IPLES:一项有效的学生学习个性化智能评价系统[J].大视野,2019(03):9-20.

[2]陈敏,杨现民.泛在学习环境下基于过程性信息的个性化学习评价系统的设计与实现[J].中国电化教育,2016(06):21-26+120.

[3]翟梅,陈健,张鸿洋.基于MOOCs的个性化学习评价系统的设计[J].计算机技术与发展,2015,25(12):165-168.

[4]牟智佳.电子书包中基于教育大数据的个性化学习评价模型与系统设计[J].远程教育杂志,2014,32(05):90-96.

[5]苏莹.一类考虑负面评价的个性化推荐系统构架研究[J].电脑知识与技术,2012,8(03):611-613.

[6]解冬青. 网络学习的个性化评价系统的研究与设计[D].华东师范大学,2011.

[7]陈莉萍,王艳丽.个性化网络学习评价模型与系统的设计[J].电子设计工程,2009,17(03):83-85.

《针对学生的个性化评价系统需求分析说明书》

《针对学生的个性化评价系统概要说明书》

# 2. 程序系统的结构

* 模块结构图：

<img src="https://uploader.shimo.im/f/fbM5a9JF8qqS3qV1.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:80%;" />

![图片](https://uploader.shimo.im/f/f2ekNUNCshIlZPus.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j)

<img src="https://uploader.shimo.im/f/phM68mViPvAmGFOZ.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom: 67%;" />

<img src="https://uploader.shimo.im/f/7G7Uloi2gyBQMRCf.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:50%;" />

<img src="https://uploader.shimo.im/f/l5MfuUX4m0fG2I72.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:50%;" />

* 总体程序流程图

![图片](https://uploader.shimo.im/f/lvkMRHpNY3OsDdJl.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j)



# 3. 成绩预测模块设计说明

## 3.1 程序描述

从数据库中读取往届学生学期内表现各项数据和期末成绩，将各项数据划分为历次随堂测验的成绩和网课观看时长等若干数据集，将所有的数据归一化，利用机器学习构建预测模型来预测成绩，将预测成绩与实际期末成绩进行对比计算预测偏差，判断偏差是否小于阈值。若大于阈值则利用机器学习进一步优化模型，直到预测偏差小于阈值为止。若小于阈值则利用预测模型得到所预测的成绩。之后输入本学期学生表现数据以得到对本学期学生成绩的预测。

## 3.2 功能

利用往届学生的学习表现和期末成绩来构建预测成绩的模型，从而对本学期学生成绩进行预测

![图片](https://uploader.shimo.im/f/pYASxzPOlOjLZOth.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j)

## 3.3 性能

（1）预测偏差：小于5%

（2）可决系数：大于0.95

## 3.4 输入项

|**输入名称**|**数据类型**|**有效范围**|
|:----|:----|:----|
|往届学生历次随堂测验成绩|int|0~100|
|往届学生网课观看时长|int|0～INT_MAX|
|往届学生期末成绩|int|0~100|
|本届学生历次随堂测验成绩|int|0~100|
|本届学生网课观看时长|int|0～INT_MAX|

## 3.5 输出项

|**输出名称**|**数据类型**|**有效范围**|
|:----|:----|:----|
|本届学生预测成绩|int|0~100|

## 3.6 算法

成绩预测模型将通过使用SVM（支持向量机）生成包含体现学生学习情况以及学习表现变量以得出预测成绩的模型。

1. 依靠往届学生相关数据计算超平面参数值y=wtx+b中的w,b。函数中x代表往届学生各项学习数据的变量，w、b为待定系数

2. 设定初始误差参数ε，即预测值与真实值之间的差值绝对值不得大于误差参数。因此对模型的优化也就是使误差参数的最小化。

3. 通过求解以上的最优问题，可以得到对训练集拟合地最优的回归函数。

4. 将本届学生成绩导入回归函数，计算预测成绩。

## 3.7 流程逻辑

<img src="https://uploader.shimo.im/f/iHjwkTKBMRcT2ga0.jpg!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:50%;" />

1. 系统连接数据库获得往届学生学习表现数据，将查询的结果进行特征分析，利用机器学习对查询结果构建模型，生成预测成绩。将生成的预测成绩与实际成绩进行对比、计算预测偏差。如果偏差较大则进一步优化模型知道预测偏差降至目标范围。最后输出优化后的模型，以及预测的成绩。

2. 通过数据库获得本届学生的学习表现，利用优化后的模型对本届学生进行成绩预测，并向web端输出预测成绩结果。

## 3.8 接口

1. 成绩预测模块包括数据库接口，通过接口与数据库进行连接以获得往届与本届学生学习表现与实际成绩并进行分析。

2. 成绩预测模块包括web模块接口，可以向web输出预测的成绩结果，用户从web界面发出请求时，成绩预测模块产生的结果将通过web界面展示。

## 3.9 存储分配

学生学习表现以及成绩预测将储存在数据库中。

## 3.10 注释设计

说明准备在本模块中安排的注释，如：

1. 在模块首部注释说明本模块开始编写的时间，编写人员，及其基本功能

2. 对数据集中纳入成绩预测模型的各项变量进行说明

## 3.11 限制条件

能够获得的往届学生学习表现与成绩数据集内容相对受限，缺少大量数据对生成的模型进行优化。

## 3.12 测试计划

利用往届学生的学习表现进行模型的训练优化，利用往届学生实际成绩作为比对对象，逐渐改善成绩预测模型以减少偏差。

## 3.13 尚未解决的问题

成绩预测模型如何纳入更加全面衡量学生学习表现的变量进行分析。



# 4. 个性化评价生成模块设计说明

## 4.1 程序描述

个性化评价生成模块会基于信息处理模块传递而来的学生个人信息，通过特定算法将学生进行性格、学习状态分类，并根据学生的分类结果为之生成个性化评价语句，将个性化评价语句传递给用户端Web页面以向用户展示。

## 4.2 功能

1. 接收信息处理模块从数据库提取出的学生个人信息。

2. 基于上述信息，对学生进行性格、学习状态分类。

3. 基于分类结果，生成个性化评价语句。

4. 将个性化评价语句传递给用户端Web页面以向用户展示。

## 4.3 性能

支持对近40种不同的性格和学习状态组合分别给出相应的个性化评价语句。

## 4.4 输入项

1. 学生历次随堂测验成绩；

2. 学生网课行为记录；

3. 学生网课观看时长。

## 4.5 输出项

基于学生的个人性格和当前学习状态对其作出的个性化评价

## 4.6 算法

基于学生的个人性格、当前知识掌握水平、学习趋势（进步、退步或振荡）三个维度对学生做出个性化评价。

具体来说，根据

（1）学生观看网课过程中部分有代表性的行为的出现频率

（2）学生网课观看时长

这两方面数据进行加权打分，根据区间划分规则提取学生性格特征、确定学生性格分类；

根据学生随堂测验平均分值，为学生划定不同的当前知识掌握水平区间；

根据学生随堂测验成绩随时间的变化情况，通过计算测验成绩与时间的相关系数，确定学生的学习进/退步趋势。

确定学生在以上三个维度上的定位后，根据不同的维度情况组合生成个性化的评价语句。

## 4.7 流程逻辑

1.输入学生身份信息和密码登录系统后，系统会在数据库里查询该名学生的学习信息，包括学生历次随堂测验成绩，学生网课行为记录，学生网课观看时长。系统的信息处理模块将查询到的信息传递给个性化评价生成模块。

2.个性化评价系统根据算法对该生的学习信息进行处理，对学生的性格、学习状态等进行分类。

3.根据分类结果，生成个性化评价语句，并将评价语句传递给用户端Web页面。

<img src="https://uploader.shimo.im/f/JSB3ry81kSUJwnMn.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom: 50%;" />

## 4.8 接口

1.个性化评价生成模块中含有数据库MySQL接口，可以与数据库连接并在数据库中实现查询信息、提取数据等功能；

2.个性化评价生成模块可以被Web框架里的views视图函数调用，生成的评价语句通过此接口被传递到views视图层里，再进而被传递到template模版层来向用户展示。

## 4.9 存储分配

学生的学习信息均储存在数据库各表中，评价语句库也以数据库表的形式储存。

## 4.10 注释设计

1.出现频率的定义：对于某一位同学，该生某一种行为出现次数占该生所有活动总数的比率。

2.MTV模式M全拼为Model,负责和数据库交互，进行数据处理；V全拼为View，接收请求，进行业务处理，返回应答；T全拼为Template,负责封装构造要返回的html。

## 4.11 限制条件

1.个性化评价语句暂时还做不到由机器以单字或词语为基本元素，完全智能地生成。

2.为保证评价的时效性，系统需要学生的学习信息被及时地人工更新。

3.根据不同的性格分类方法，分类结果不唯一，此处分类仅供参考。

## 4.12 测试计划

根据往年同学的去隐私个人信息记录，测试程序的正常运行。

## 4.13 尚未解决的问题

1.如何针对更大数量规模的学生群体制定更为精细、体贴的个性化评价。

2.如何设计程序以实现根据学生反馈定期改进个性化评价生成模块的算法。



# 5. 用户端web模块设计说明

## 5.1 程序描述

Web客户端模块提供本地服务，用户可以通过交互界面进行诸如登录登出、输入基本信息、查询预测成绩、查询个性化评价等系列操作。可视化地展示了个性化评价生成模块和成绩预测模块生成的输出内容。

## 5.2 功能

web客户端系统主要针对老师/助教，学生和管理员三种不同的使用用户，三种用户都具有基本的登录登出功能。主要的具体功能对于不同的用户角色具有一定差异：

1.教师/助教登录后可以对学生的成绩预测和个性化评价进行查询，可以更新提交学生最新的平时成绩；

2.学生进行登录后可以输入自己的基本信息进行成绩预测查询；

3.管理员可以进行成绩预测查询、更新数据、增加删除用户、修改账户权限或选择系统管理功能。

## 5.3 性能

|**运行**|**模块组合**|**响应时间(ms)**|
|:----|:----|:----|:----|:----|:----|
|登录系统|Web客户端模块、数据库|500|
|教师/助教查询功能|成绩预测模块、个性化评价生成模块、数据库模块|1000|
|教师/助教更新功能|Web客户端模块、数据库模块|500<br>|
|学生查询功能|数据库模块、成绩预测模块|1000|
|管理员查询功能|成绩预测模块、个性化评价生成模块、数据库模块|1000|
|管理员更新功能|数据库模块|500|

## 5.4 输入项

|**输入名称**|**数据类型**|**格式/请求**|**有效范围**|
|:----|:----|:----|:----|
|账号名称|char|json/POST|6-16位|
|账号密码|char|json/POST|6-16位|
|教师/助教查询请求|    |json/GET|    |
|教师/助教更新信息请求|    |json/POST|    |
|历次课堂派测试成绩|int|json/POST|0~100分|
|网课观看时长|int|json/POST|0～INT_MAX|
|学生查询成绩预测值请求|    |json/GET|    |

安全保密：对请求数据进行签名，防止非法请求和重放攻击，同时，对用户敏感数据进行加密；

## 5.5 输出项

|**输出名称**|**数据类型**|**有效范围**|
|:----|:----|:----|
|账号名称|char|6-16位|
|学生成绩预测值|int|0~100|
|学生平时成绩|int|0~100|
|学生个性化评价|char||
|是否更新成功|bool|    |
|是否操作成功|bool|    |

安全保密：对请求数据进行签名，防止非法请求和重放攻击，同时，对用户敏感数据进行加密；

## 5.6 流程逻辑

* 第一层盒图

<img src="https://uploader.shimo.im/f/gfz7ITvYqavacKvy.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:50%;" />

- 登录系统功能盒图

<img src="https://uploader.shimo.im/f/6xBCuzv3zpoyNefq.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:50%;" />

登录功能的详细设计：

1. 展示登录界面
2. 用户填写form表单（用户名+密码）
3. 验证表单的完整性（有空缺就不能提交）
4. 用户提交form表单
5. 验证用户是否存在
6. 验证用户密码是否正确
7. 验证通过

- 查询功能盒图

<img src="https://uploader.shimo.im/f/e2dQcsjch2iMIFGN.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:50%;" />

- 更新功能盒图

<img src="https://uploader.shimo.im/f/MyPGEGF9DPk0J3Wq.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:50%;" />

* 系统管理功能盒图

<img src="https://uploader.shimo.im/f/fTntmbLpb66tRUkf.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:50%;" />

* 登出系统功能盒图

<img src="https://uploader.shimo.im/f/k01CDBHq9mHMsmIm.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:67%;" />

## 5.7 接口

<img src="https://uploader.shimo.im/f/JhXDa0sB40OvxtV1.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j" alt="图片" style="zoom:67%;" />

web应用程序与web服务器程序之间的接口格式遵循WSGI(Web Server Gateway Interface)规范，以达 到web应用程序与web服务器程序间的解耦。应用程序采用Django开发框架，服务器程序使用wsgiref模块进行开发。

其中，服务器程序使用Python提供的pymysql模块进行对数据库的连接和访问。 网络软件接口使用tcp传输协议，采用滑动窗口方式对数据进行网络传输及接收。

应用程序使用Django ORM，通过使用描述对象和数据库之间的映射的元数据，将程序中的对象自动持久化到数据库中。

框架: Django;

设计模式: MTV 

Model: 数据存储层，处理所有数据相关的业务，和数据库进行交互，并提供数据的增删改查; 

Template: 模板层(也叫表现层)具体来处理页面的显示; 

View:业务逻辑层，处理具体的业务逻辑，它的作用是连通Model 层和 Template 。

Web应用部分的具体接口如下:

(1)Model模块: 数据库模型

(2)Templates模块: 前端css js html文件

(3)admin模块: 调用Django自带的后台管理系统，管理后台数据以及用户注册、登陆验证

(4)views模块: 从Models模块提取数据，并传送给templates模块来进行前端展示

![图片](https://uploader.shimo.im/f/YT8ajXBWTHq6VbLG.png!thumbnail?fileGuid=aBAYVOjRn8F1jm3j)

## 5.8存储分配

无特别要求

|    **客户端**|内存：500KB（<=2MB），本地存储：20MB|    |
|:----|:----|:----|
|**数据库**|内存：1GB；<br>硬盘：50GB|适当情况下可扩容|

## 5.9注释设计

#### 5.9.1 单行注释（single-line）：//注释内容

一次只能注释一行，一般是简单注释，用来简短描述某个变量或属性，程序块。

#### 5.9.2 块注释（block）：/*注释内容*/

为了进行多行简单注释，一般不使用。

#### 5.9.3 文档注释：/**注释内容 */

/**

* projectName: xxx

* fileName: xxx

* packageName: xxxx

* date: 2020年12月6日14:28:39

* copyright(c) 2020-2021xxx

*/

#### 5.9.4 类注释

类注释(Class)主要用来声明该类用来做什么，以及创建者、创建日期版本、包名等一些信息:

/**

* @version: V1.0

* @author: Lulusimili

* @className: user

* @packageName: user

* @description: 这是用户类

* @data: 2020-06-28 12:20

**/

#### 5.9.5 方法注释

方法注释(Methods)主要用来声明该类的作用、入参、返回值、异常等信息:

/**

* @version: V1.0

* @author: Lulusimili

* @methodsName: addUser

* @description: 添加用户

* @param:  xxxx

* @return: String

* @throws: IOException

**/

## 5.10限制条件

必须在连接互联网的情况下才能使用本模块，否则将提示网络异常信息。

## 5.11测试计划

测试范围：登录功能、查询功能、更新功能、后台管理功能

测试类型：

|**测试类型**|**测试内容**|
|:----|:----|
|功能测试|四个功能模块是否能根据输入项返回正确的输出结果|
|兼容性测试|web界面是否可以在各个主流浏览器、各个操作系统正常访问|
|性能测试|各个模块是否满足响应时间的要求|

进度安排：

|**里程碑**|**完成时间**|**完成标准**|
|:----|:----|:----|
|测试计划编写|2020-12-06|测试计划编写完成并通过评审|
|基础用例编写|2020-12-10|基础用例编写并完成通过评审|
|补充测试用例|2020-12-12|测试用例文档补充完成并通过评审|
|测试用例执行|2020-12-13|完成所有里程碑测试和标准测试,测试种类包括确认测试和系统测试，且所有以发现的Bug等级为1/2/3的Bug已修复，近期内无发现新的Bug|
|产品发布|2021-01-01|重复进行主流程测试和进行Bug检查测试，产品处于可交付状态并由老师和助教确认|

人员职责：

|**角色**|**人员**|**职责**|
|:----|:----|:----|
|测试人员|全体组员|功能测试|

软件测试环境：

|**操作系统**|Windows 10，macOS Catalina 10.15.7|
|:----|:----|
硬件测试环境：

|网络|4G、5G、WiFi|
|:----|:----|
|设备|HP、MBP真机两台|

桩模块：成绩预测模块、个性化评价生成模块
